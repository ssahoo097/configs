{
  "key": "occupancy-certificate",
  "DataConfigs": {
    "serviceName": "rainmaker-bpa",
    "version": "1.0.0",
    "baseKeyPath": "$.Bpa.*",
    "entityIdPath": "$.applicationNo",
    "isCommonTableBorderRequired": true,
    "mappings": [
      {
        "mappings": [
          {
            "direct": [
              {
                "variable": "logoImage",
                "url": "https://raw.githubusercontent.com/egovernments/egov-web-app/master/web/rainmaker/dev-packages/egov-ui-kit-dev/src/assets/images/pblogo.png",
                "type": "image"
              },
              {
                "variable": "applicationNo",
                "value": {
                  "path": "$.applicationNo"
                }
              },
              {
                "variable": "planPermissionNo",
                "value": {
                  "path": "$.approvalNo"
                }
              },
              {
                "variable": "edcrNo",
                "value": {
                  "path": "$.edcrNumber"
                }
              },
              {
                "variable": "createdDate",
                "value": {
                  "path": "$.auditDetails.createdTime"
                },
                "type": "date"
              },
              {
                "variable": "ownerName",
                "value": {
                  "path": "$.landInfo.owners.*.name"
                }
              },
              {
                "variable": "tenantName",
                "value": {
                  "path": "$.tenantId"
                },
                "localisation": {
                  "required": true,
                  "prefix": "TENANT_TENANTS",
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "orderGeneratedOn",
                "value": {
                  "path": "$.approvalDate"
                },
                "type": "date"
              },
              {
                "variable": "favourOf",
                "value": {
                  "path": "$.landInfo.owners.*.name"
                }
              },
              {
                "variable": "SALUTATION",
                "value": {
                  "path": "BPA_PDF_SALUTATION"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "BPA_FORM",
                "value": {
                  "path": "BPA_PDF_FORM"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "BPA_FORM_APPROVAL",
                "value": {
                  "path": "BPA_PDF_FORM_APPROVAL_TXT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "BPA_BYELAWS",
                "value": {
                  "path": "BPA_PDF_BYELAWS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "PLAN_PERMISION_NO",
                "value": {
                  "path": "BPA_PDF_PLANPERMISSION_NO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "Dated",
                "value": {
                  "path": "BPA_PDF_DATED"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "dated",
                "value": {
                  "path": "BPA_PDF_DATED_SMALL"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "FOR",
                "value": {
                  "path": "BPA_PDF_FOR"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "Muncipal_Council",
                "value": {
                  "path": "BPA_PDF_MUNCIPAL"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "appendix",
                "value": {
                  "path": "BPA_PDF_APPENDIX"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "seeRule",
                "value": {
                  "path": "BPA_PDF_SEERULE"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "ocName",
                "value": {
                  "path": "BPA_PDF_OCNAME"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "ocName",
                "value": {
                  "path": "BPA_PDF_OCNAME"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "or",
                "value": {
                  "path": "BPA_PDF_OR"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "certificateUse",
                "value": {
                  "path": "BPA_PDF_CERTIFICATE_USE"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "ref",
                "value": {
                  "path": "BPA_PDF_REF"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "applicationNumber",
                "value": {
                  "path": "BPA_PDF_APPLICATIONNO"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "from",
                "value": {
                  "path": "BPA_PDF_FROM"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "certifiedText",
                "value": {
                  "path": "BPA_PDF_CERTIFIED_TXT"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "issuedTo",
                "value": {
                  "path": "BPA_PDF_ISSUED_TO"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "supervisedBy",
                "value": {
                  "path": "BPA_PDF_SUPERVISED_BY"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "ocSummaryText",
                "value": {
                  "path": "BPA_PDF_OC_SUMMARY"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "place",
                "value": {
                  "path": "BPA_PDF_PLACE"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "approvedByName",
                "value": {
                  "path": "BPA_PDF_APPROVED_BY"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "assistantEngineer",
                "value": {
                  "path": "BPA_PDF_AST_ENGR"
                },
                "type" : "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-bpa"
                }
              },
              {
                "variable": "applicantName",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.planInformation.applicantName"
                }
              },
              {
                "variable": "applicationDate",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.applicationDate"
                },
                "type": "date"
              },
			  {
                "variable": "approverNote",
                "value": {
                  "path": "$.additionalDetails.approverNote"
                }
              },
			  {
				  "variable" : "approverNoteHeader",
				  "value":{
					  "path":"BPA_APPROVAL_REJECTION_NOTE"
				  },
				  "type":"label",
				  "localisation": {
					  "required": true,
					  "prefix": null,
					  "module": "rainmaker-bpa"
					  }
			  },
			  {
                "variable": "subOccupancy",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.planInformation.subOccupancy"
                }
              },	
			  {
                "variable": "floorInfo",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.planInformation.floorInfo"
                }
              },
			  {
                "variable": "plotNo",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.planInformation.plotNo"
                }
              },
			  {
                "variable": "village",
                "value": {
                  "path": "$.landInfo.address.locality.name"
                }
              },
              {
                "variable": "permitApplicationDate",
                "value": {
                  "path": "$.applicationDate"
                },
                "type": "date"
              },
			  {
                "variable": "buildingPermitNumber",
                "value": {
                  "path": "$.edcrDetail[0].permitNumber"
                }
              },
			  {
                "variable": "architectName",
                "value": {
                  "path": "$.edcrDetail[0].planDetail.planInfoProperties.ARCHITECT_OR_TECHNICAL_PERSON_NAME"
                }
              }
            ]
          },
          {
            "externalAPI": [
              {
                "path": "http://egov-workflow-v2.egov:8080/egov-workflow-v2/egov-wf/process/_search",
                "queryParam": "tenantId=$.tenantId,businessIds=$.applicationNo,history=true",
                "apiRequest": null,
                "responseMapping": [
                  {
                    "variable": "approvedBy",
                    "value": "$.ProcessInstances[?(@.action=='APPROVE')].assigner.name",
                    "isUpperCaseRequired": true
                  }
                ]
              },
              {
                "path": "http://egov-mdms-service:8080/egov-mdms-service/v1/_get",
                "queryParam": "moduleName=tenant&masterName=tenants&tenantId=od&filter=%5B?(@.code=='{$.tenantId}')%5D",
                "apiRequest": null,
                "responseMapping": [
                  {             
                    "variable":"ulb_grade",
                    "value":"$.MdmsRes.tenant.tenants[0].city.ulbGrade"
                  },
                  {
                    "variable": "logoImageMdms",
                    "value": "$.MdmsRes.tenant.tenants[0].logoId",
                    "type": "image"
                  }
                ]
              }
            ]
          },
          {
            "qrcodeConfig": [
              {
                "variable": "qrCode",
                "value": "Applicant Name: {{favourOf}}, Permit Order Number : {{planPermissionNo}}, Permit Order Date : {{orderGeneratedOn}}, eDCR Scrutiny Number: {{edcrNo}}"
              }
            ]
          }
        ]
      }
    ]
  }
}